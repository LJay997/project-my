我已经为你创建了一个完整的 SQL 脚本文件 `mysql_simulation.sql`，用于模拟 MySQL 中的不可重复读和幻读场景。这个脚本包含了详细的步骤和注释，你可以直接在 MySQL 环境中执行来观察不同隔离级别的效果。

### 脚本内容概览

1. **初始化测试环境**
    - 创建数据库和表
    - 插入测试数据

2. **查看当前事务隔离级别**
    - 使用 `SELECT @@transaction_isolation;` 查看默认设置

3. **模拟不可重复读场景**
    - 会话 A 开启事务并读取数据
    - 会话 B 在中间修改数据并提交
    - 会话 A 再次读取发现数据不一致

4. **模拟幻读场景**
    - 会话 A 查询某个范围的数据
    - 会话 B 插入新数据并提交
    - 会话 A 再次查询发现多了一条记录

5. **设置隔离级别为 REPEATABLE READ**
    - 重新测试不可重复读和幻读场景，观察问题是否解决

6. **设置隔离级别为 SERIALIZABLE**
    - 测试最高隔离级别下的幻读防护机制

### 使用方法

1. 下载生成的 `mysql_simulation.sql` 文件
2. 在你的 MySQL 环境中执行脚本中的 SQL 语句
3. 按照注释中的说明，在两个不同的会话中分别执行对应的操作
4. 观察不同隔离级别下事务行为的差异

这个实验可以帮助你深入理解 MySQL 事务隔离级别的实际效果和工作机制。